<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>                                                                 
		<title>functionBlockTemplate</title>
		<meta charset="UTF-8" />
		<meta http-equiv="Content-Type" content="text/html" />
		<link rel="stylesheet" type="text/css" media="all" href="../../static/assets/css/svgPage.css" th:href="@{/assets/css/svgPage.css}" />
	</head>
<body>
	<button id="myBtn">Open Modal</button>
	<svg width="100%" height="768" >
		<g
			th:fragment="functionBlock (attr, children)"
			th:each="figure,iterStat : ${children}"
			th:remove="tag"
		>
				<g
					th:replace="${figure.templateName} :: ${figure.fragmentName}(${figure.arguments}, ${figure.children})" 
				>
				</g>
		</g>
		<foreignObject>
			<div id="myModal" class="modal">
				<div class="modal-content">
					<span class="close">&times;</span>
					<svg width="100%" height="100%">
						<text x="0" y="20">Hello world!</text>
					</svg>
					<p id="demo">Some text in the Modal..</p>
					<button onclick="loadDoc()">Click Me!</button>
				</div>
			</div>
		</foreignObject>
	</svg>
	<!-->
	<--> 
	<script th:inline="javascript" type="text/javascript">
	/*<![CDATA[*/
		// Get the modal
		var modal = document.getElementById('myModal');

		// Get the button that opens the modal
		var btn = document.getElementById("myBtn");

		var span = document.getElementsByClassName("close")[0];

		// When the user clicks the button, open the modal 
		btn.onclick = function() {
			modal.style.display = "block";
		}

		span.onclick = function() {
			modal.style.display = "none";
		}

		function loadDoc() {
		  var xhttp = new XMLHttpRequest();
		  xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
			 document.getElementById("demo").innerHTML = this.responseText;
			}
		  };
		  xhttp.open("GET", "/getModal", true);
		  xhttp.send();
		}

		// When the user clicks anywhere outside of the modal, close it
		//window.onclick = function(event) {
		//	if (event.target == modal) {
		//		modal.style.display = "none";
		//	}
		//}
	/*]]>*/
	</script>
</body>
</html>
